# 연쇄적인 정리

## 요약

> 악보의 음표를 다루듯 코드를 정리하는 연습을 하세요.
> 음표가 깨끗하고 편안할 때 이를 이용해서 더 좋은 멜로디를 만들 수 있습니다.

### 단계의 크기를 고민하고 결정

코드 정리 단계는 결국 각자가 판단해야 하는데요.

처음에는 아주 작은 단계로 나누어 코드를 정리하는 방식을 먼저 익히는 것을 추천해요.

체스를 둘 때 체크메이트를 두기 위해 몇 수를 두듯, 모든 것을 한 걸음씩 천천히 내딛어 설계에 대한 방향성을 뚜렷하게 해야 해요.

### 기존에 배운 것들을 활용

#### 보호구문

복잡한 분기처리를 정리하고 나면, 코드가 간결해져서 다른 정리에 대한 영감을 얻을 가능성이 높아져요.

#### 안 쓰는 코드

안 쓰는 코드를 지움으로써 메워진 여백 간 코드의 응집도가 타당한지를 더욱 쉽게 살필 수 있어요.

#### 대칭으로 맞추기

같은 코드와 다른 코드를 일치시켜 대칭으로 맞추다 보면 비슷해 보이는 코드들이 보여요.  
이는 응집도를 높이기 위해 모두 모아서 배치하는 등으로 개선 가능하도록 해요.

### 새로운 인터페이스로 기존 루틴 부르기

인터페이스를 새롭게 만들고, 변환하는 과정에서 호출하는 코드들에 대한 변환이 이루어져요.

또한, 인터페이스를 바꾸는 과정이기 때문에 다른 코드 정리들이 수반되어야 해요.

### 읽는 순서

가독성을 높이면, 코드에 대한 이해도에 영향을 주기 때문에 연쇄적인 코드 정리가 발생할 가능성이 높아져요.

### 응집도를 높이는 배치

응집도가 높다는 것은 비슷한 것끼리 위치하는 것을 뜻해요. 따라서 동작하는 것들이 비슷하겠죠.

따라서 응집도를 높이는 배치는 별도의 도우미 추출 등의 반복되는 코드를 덜어내는 정리들이 발생할 수 있어요.

### 설명하는 변수 / 상수

변수와 상수를 설명력 있게 작성함으로써 주석을 삭제할 수 있어요.

### 명시적인 매개변수

매개변수를 명확하게 드러내는 과정에서 매개변수를 객체로 묶는 등의 추상화가 발생해요.

### 비슷한 코드끼리

비슷한 코드에 대한 주석이 발생할 수 있고, 응집도를 높이는 배치와 비슷한 효과가 발생해요.

### 도우미 추출

도우미 함수를 추출함으로써 주석 / 상수 / 변수를 다시 정의할 수 있어요.

### 하나의 더미

코드들이 모여서 만약 어우러지지 않는다면 비슷한 코드끼리 정리하거나 주석, 도우미 함수 등을 만드는 정리 과정이 발생해요.

### 설명하는 주석, 불필요한 주석 지우기

기존의 변수 / 상수를 설명력 있게 하는 과정이 발생할 수 있어요.

## 발제

### 그렇다면 어느 정도의 연쇄적인 코드 정리를 묶는 것이 좋을까요?

PR을 최대한 잘게 쪼개는 것은 이해가 되지만, 하나의 PR 당 하나의 코드 정리 기준을 별도로 만들기엔 이 역시 번잡하다는 생각이 들어요.

현재 여러 개의 정리 방법들이 기술되어 있는데, 어떠한 상황에서는 단일 PR에서 관리되는 것이 좋을지 이야기를 나눠봤으면 좋겠어요.

> ex) 설명하는 변수 혼자 코드정리 했다고 PR 놓기에는 아깝다.
